<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>quiz Website</title>
        <style>
            body{
                background-image: linear-gradient(to bottom right, #A683E3  ,#E4E9FD );
            }
            form{
                max-width: 700px;
                margin: auto;
                display:block;
                width: 70%;
            }
            .top{
                display: flex;
                background-color: #E4E9FD;
                height: 100px;
                justify-content: center;
                align-items: center;
                border: 1px solid #A683E3;
                border-radius: 5px;
                margin-bottom: 40px;
            }
            .mcq{
                border-radius: 5px;
                background-color: #E4E9FD;
                padding: 10px;
            }
            .question{
                margin-bottom: 20px;
            }
            .opt{
                font-weight: 400;
                border: 2px solid ;
                border-radius: 5px;
                padding: 5px;
                padding-left: 15px;
                width: 100%;
                cursor: pointer;
                margin-bottom: 15px;
            }
            .opt:hover{
                background: #A683E3;
                background-color: #A683E3;
            }
            .full{
                background-color: #A683E3;
                border-radius: 5px;
                padding: 20px;
                width: 100%;
            }
            .b{
                float: right;
                margin-top: 20px;
                pointer-events: none;
            }
            .b.active{
              pointer-events: auto;
            }
            #t{
                float: right;
                margin-top: 20px;
                margin-right: 10px;
            }
            #n{
                float: left;
                margin-top: 20px;
            }
            .container{
                margin-top: 150px;
            }
            .info{
                /* display: inline-block; */
                width: 100%;
                border-radius: 5px;
                background-color:#A683E3;
                margin-top: 100px;
                padding: 20px;
            }
            .number{
                border: 3px solid #A683E3;
                border-radius: 50%;
                height: 40px;
                width: 40px;
                display: inline-block;
                justify-content: center;
                align-items: center;
                background-color: #E4E9FD;
                margin-bottom: 10px;
            }
            .in{
                display: inline-block;
                width: 100%;
                /* margin-bottom: 80px; */
                padding: 10px;
                padding-left: 20px;
                margin-bottom: 30px;
                background-color: #E4E9FD;
                border-radius: 5px;
            }
            h6{
                padding-bottom: 20px;
            }
            .numofques{
                display: inline-block;
                background-color: #E4E9FD;
                padding: 10px;
                border-radius: 5px;
                width: 100%;
            }
            .number p{
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .timer{
                display: flex;
                justify-content: right;
                font-size: 30px;
                color: gray;
            }
            .count{
                margin-top: 20px;
                font-size: 20px;
            }
            .op .opt.colorchange{
              background: #A683E3;
              color: black;
            }
            .op .opt.disabled{
              pointer-events: none;
            }
            .result-box{
              position: absolute;
              top: 25%;
              left: 25%;
              width: 50%;
              margin: auto;
              border: 2px solid black;
              border-radius: 5px;
              background-color: #E4E9FD;
              padding: 20px;
              display: flex;
              flex-direction: column;
              align-items: center;
              opacity: 0;
              pointer-events: none;
            }
            .result-box.active{
              opacity: 1;
              pointer-events: auto;
            }
            .result-box h2{
              font-size: 52px;
            }
            .result-box .percentage-container{
              width: 300px;
              display: flex;
              flex-direction: column;
              align-items: center;
            }
            .percentage-container .circular-progress{
              position: relative;
              width: 250px;
              height: 250px;
              background: conic-gradient(#A683E3 3.6deg, rgba(255,255,255, .1) 0deg);
              border-radius: 50%;
              display: flex;
              justify-content: center;
              align-items: center;
            }
            .percentage-container .circular-progress::before{
              content: '';
              position: absolute;
              width: 210px;
              height: 210px;
              background: #E4E9FD;
              border-radius: 50%;
            }
            .circular-progress .progress-value{
              position: relative;
              font-size: 45px;
              font-weight: 600;
            }
            .percentage-container .score-text{
              font-size: 26px;
              font-weight: 600;
              margin-top: 20px;
            }
            .gohome{
              width: 130px;
              height: 47px;
              background: #A683E3;
              border-radius: 5px;
              outline: none;
              font-size: 16px;
              font-weight: 600;
              cursor: pointer;
            }
            .gohome:hover{
              background: #E4E9FD;
              background-color: #E4E9FD;
            }
            .b1.active{
              opacity:0;
              pointer-events: none;
            }
        </style>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    </head>

    <body >
      <div class="b1">
        <form>
        <div class="top">
        <h1><%= question[0].Topic%> </h1>
        </div>
        <div class="timer" id="timer">00:00:00</div>
        <div class="full">
        <div class="question mcq">
          <h2 class="mcq1"> <%=question[0].question%> </h2>
        </div>
        <div class="mcq opt1 op">
          <label for="html" class="opt"> <%=question[0].opt1%> </label><br>
          <label for="html" class="opt"> <%=question[0].opt2%></label><br>
          <label for="html" class="opt"> <%=question[0].opt3%> </label><br>
          <label for="html" class="opt"> <%=question[0].opt4%> </label><br>
        </div>
        </div>
            <button id="b" type="button" class="btn btn-primary b">Save and Next</button>
            <button id="t" type="button" class="btn btn-primary">Skip</button>
        <h6 class="count">1 of 4 Questions</h6>
        </form>

        <div class="container foot">
            <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
              <div class="col-md-4 d-flex align-items-center">
                <a href="/" class="mb-3 me-2 mb-md-0 text-body-secondary text-decoration-none lh-1">
                  <svg class="bi" width="30" height="24"><use xlink:href="#bootstrap"></use></svg>
                </a>
                <span class="mb-3 mb-md-0 text-body-secondary">Â© 2023 Company, Inc</span>
              </div>
            </footer>
          </div>
          </div>



          <div class="result-box">
            <h2>Quiz Result</h2>
            <div class="percentage-container">
              <div class="circular-progress">
                <span class="progress-value">0%</span>
              </div>
              <span class="score-text">You scored 0 out of 5</span>
            </div>
            <form action="/last" method="post">
            <center><button class="gohome">Go To Home</button></center>
            </form>
          </div>
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script> -->
        <script>
          const startbtn=document.querySelector('.block');
const popupinfo=document.querySelector('.popupinfo');
const body=document.querySelector('body');
startbtn.onclick = ()=>{
      popupinfo.classList.add('active1');
      body.classList.add('body');
};
var questions=[];
var problems="<%=question%>";
for(let problem of problems){
  var topic="<%=problem.Topic%>";

  questions.push[
{
  Topic:topic,
                  
                  question:"<%=question[i].question%>",
                  answer:"<%=question[i].answer%>",
                  options:[
                  "<%=question.opt1%>",
                      "<%=question.opt2%>",
                      "<%=question.opt3%>",
                      "<%=question.opt4%>",
                  ]
}
 
]
 }
  
  var count=1;
          var quesnumb=1;
          var score=0;
          function showques(index){
            const questext=document.querySelector('.mcq1');
            questext.textContent=schema.find().questions[index].question;
            var opttag=`<label for="html" class="opt">${schema.find().questions[index].opt0}</label><br>
                       <label for="html" class="opt">${schema.find().questions[index].opt1}</label><br>
                       <label for="html" class="opt">${schema.find().questions[index].opt2}</label><br>
                       <label for="html" class="opt">${schema.find().questions[index].opt3}</label><br>`;
            opt1.innerHTML=opttag;
            const opt=document.querySelectorAll(".opt");
            for(var i=0;i<opt.length;i++){
              opt[i].setAttribute('onclick','optselected(this)');
            }
          };

          function optselected(answer){
            var userans=answer.textContent;
            var correctans=questions[count-1].answer;
            var allopt=opt1.children.length;
            answer.classList.add('colorchange');
            if(userans==correctans){
              score=score+1;
            console.log(score);
            }else{
            console.log("ans is wrong");
            }
            for(var i=0;i<allopt;i++){
              opt1.children[i].classList.add('disabled');
            }
            nextbtn.classList.add('active');
          }
          const opt1=document.querySelector('.opt1');
          const nextbtn=document.querySelector('.b');
          showques(0);
          nextbtn.onclick=()=>{
            // count++;
            if(count<questions.length){
            showques(count);
            count++;
            quesnumb++;
            quescounter(quesnumb);
            nextbtn.classList.remove('active');
          }else{
             showresultbox();
          }
          }
          function quescounter(index){
            const questotal=document.querySelector(".count");
            questotal.textContent=`${index} of ${questions.length} Questions`;
          }
          const resultbox=document.querySelector('.result-box');
          const full=document.querySelector('.b1');
          function showresultbox(){
              full.classList.add('active');
              resultbox.classList.add('active');
              const scoretext=document.querySelector('.score-text');
              scoretext.textContent=`You scored ${score} out of ${questions.length}`;
              const circularprogress=document.querySelector('.circular-progress');
              const progressvalue=document.querySelector('.progress-value');
              var  progressstartvalue=-1;
              var progressendvalue=(score/questions.length)*100;
              var speed=20;

              var progress = setInterval(() => {
                progressstartvalue++;
                // console.log(progressstartvalue);
                progressvalue.textContent=`${progressstartvalue}%`;
                // var prog=progressendvalue-progressstartvalue
                circularprogress.style.background=`conic-gradient(#A683E3 ${(progressstartvalue+1)*3.6}deg, rgba(255,255,255, .1) 0deg)`;
                if(progressstartvalue==progressendvalue){
                  clearInterval(progress);
                }
              },speed);
          }

        </script>
    </body>
</html>


          
